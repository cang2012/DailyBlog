分布式存储HDFS，管理着几千、几万个磁盘，对应应用程序提供PB级别的计算存储容量。

HDFS会将数据切片分成不同的Block,这些不同的Block被放到服务器集群内的不同服务器或者机架上。DataNodes用来存放数据，NameNode用来存放元数据metadata包括文件路径、复制份数、Block编号。HDFS可以对不同的分片数据并行进行读写。

如何故障容错？如果DataNodes上数据有误，在DataNode上存储之前先对数据校验和之后再存储；如果磁盘损坏，DataNode监测到磁盘上的数据有损坏，将该磁盘上的所有数据的BlockID报告给NameNode, NameNode检查这些BlockID哪里有备份，将对应的数据复制到其它服务器上；DataNode坏了怎么办，通过心跳和NameNode保持通信，如果超时没有发送心跳就说明有故障；NameNode容错，会准备主从NameNode，两者争向从Zookeeper获取znode锁，谁获取到了就是主NameNode,主从NameNode之间通过Shared edits保持同步，DataNode会向主NameNode发送心跳，主NameNode会向DataNode发送控制信息。

如何保证系统可用？冗余备份，无论应用程序还是数据在多台服务器上备份，条件具备的在多个数据中心进行备份，这叫异地多活；通过失效转移，需要对失效进行鉴定。如果NameNode从服务器错误地认为主NameNode服务宕机接管集群管理，这样主从NameNode一起对DataNode发送指令，导致集群混乱，这叫脑裂；通过限流和降级，限流是拒绝部分请求，降级是关闭次要功能。

可以把个人APP做成分布式节点吗？手机空间不能保证高可用。均衡时频繁的文件转移，对网络要求高。验证响应延时。单块数据在手机上受限，超过128M就不行了。
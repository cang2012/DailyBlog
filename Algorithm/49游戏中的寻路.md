> 在游戏场景中的人物，当点击场景中某个方向的位置，人物就会找出一条适合的路径，并且会绕过障碍物，这是如何实现的呢？

Dijkstra是最短路径算法，当图非常大的时候执行会很耗时。游戏中用到的是A*算法，和Dijkstra算法不一样，A*算法需要找出一条接近于最短路线的次优化路线。

Dijkstra算法和图论BFS宽度优先算法很相似，每次找到跟起点最接近的顶点，往外扩展。在Dijkstra算法所使用的优先级队列中记录已经遍历的节点，节点值保存的是起点到顶点的路径长度。起点到顶点的路径长度越小，就越优先从优先级队列中出来。

但在游戏中，如果按Dijkstra算法来，可能会导致跑偏甚至跑向相反的方向，因为优先级队列让起点和节点间路径更短的先从队列出来，而先出来的节点可能是和正真要去的方向是不一致的。如果把顶点到终点可能要走多远也考虑进去呢？

大致过程这样：

- 从起点到顶点i的路径长度是g(i)
- 这个顶点与终点的路径长度是h(i)，这个h(i)叫启发函数，heuristic  function
- 可以用欧几里得计算路径长度，但是欧几里得的开根号挺耗时的
- 还可以用曼哈顿距离Manhattan distanc来计算距离，因为计算过程只涉及加、减、反转所以很高效
- 这样根据g(i)和h(i)，有了f(i)=g(i)+h(i)，这个f(i)叫作估价函数evaluation function

而在游戏中不存在明确的岔路和道路，也就不能抽象成图论中的顶点和边。怎么办呢？

**分治。**

把地图分割成一个一个小块，每个小块就是一个节点，每个小块只能有4个方向，上下左右，这样在相邻的小块之间有了方向和边，并且边的权值都是1，这就把游戏中的地图抽象成了有向有权图了。




> 数据不可变？内存里的数据、文件数据、网络中流动的数据......这些数据都是可变的。这里说的数据不可变是要加入时间的维度来看数据。

假设在t0时刻数据是D0，时间来到t1时刻，来了一个E1事件，数据变成D1。的确，从内存的角度来看，数据在变。如果把所有的时间点、事件、数据都持久化下来，那数据就是不可变的了。这种做法在函数式编程里被大量地运用。A线程做了一个动作把数据从D0变成了D1，B和C线程即使还在使用Do,也不会相互影响。

数据不可变有什么好处呢？**大大降低了代码的上下文依赖。**

> 在代码世界里是怎样和数据打交道呢？数据都有标识。

比如一种数据，通过md5形成一个标识，通过sha1也形成一个标识，每一种标识都是唯一，都代表着同一个数据。数据和标识之间的关系就像是1对多关系，数据可以有多个标识，每个标识对应一种数据。就像一个人，看作是数据，人的标识有指纹、DNA等。

**而且数据和标识是一种双向关系。**怎么说呢？通过标识可以找到唯一的数据，数据通过不同得算法或函数可以得到不同的标识。

> 那么，所有数据是否都是通过标识获取到呢？也不一定。比如Socket之间的通讯就包括src ip, src port, dest ip, dest port, protocol。

可以把地址理解成标识的超集，标识是地址的子集。

**地址和数据之间的关系就像键值对，地址是键，数据是值。**

> 接下来就是，如何查找地址呢？经过很多人的实践，直接和地址打交道是比较艰涩的，人们想到了`引用`。

变量是引用，代表着内存地址；`git reset HEAD~1`中的HEAD是引用。

而引用的背后传递着`隔离indirection`思想。正所谓"墙内墙外都无需知道对方，但两者之间维系着一个共识算法"。

> 数据衍生。

举例来说，一个原图带着几张缩略图，这里的缩略图就是原图的数据衍生。如何设计衍生数据呢？

- 原图通过sha算法生成标识abcd
- 缩略图也通过sha算法生成标识efgh,然后再带着原图的标识abcd
- 这样原图通过2次sha算法得到缩略图，而缩略图同样通过反向的sha算法得到原图

> 不难想象，随着5G时代的到来，过去、现在、未来都会以一种不可变的方式记录和连接起来。



